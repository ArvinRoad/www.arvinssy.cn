{"title":"Three.Js开发WebGL地月环绕","uid":"c000f7024ccb6c476e7ef6fa4b60fe28","slug":"ThreeJsWebGL_2022_4.20.01","date":"2022-04-21T07:19:00.000Z","updated":"2023-11-26T10:38:32.669Z","comments":true,"path":"api/articles/ThreeJsWebGL_2022_4.20.01.json","keywords":null,"cover":"https://pic3.zhimg.com/v2-7af105b5915de8a7fdcf6332b681aba5_r.jpg","content":"<h1 id=\"Three-Js开发WebGL地月环绕\"><a href=\"#Three-Js开发WebGL地月环绕\" class=\"headerlink\" title=\"Three.Js开发WebGL地月环绕\"></a>Three.Js开发WebGL地月环绕</h1><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Three.Js GitHub地址：<a href=\"https://github.com/mrdoob/three.js\">点击跳转</a></p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>Three.Js API说明文档：<a href=\"https://threejs.org/docs/index.html#manual/zh/introduction/Creating-a-scene\">点击跳转</a></p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>或复制网页端Three.js源码使用：<a href=\"https://threejs.org/build/three.js\">点击跳转</a></p></blockquote>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>演示网站：<a href=\"https://arvinroad.github.io/3DEAMS/\">点击跳转</a></p></blockquote>\n<h2 id=\"完整实例代码：\"><a href=\"#完整实例代码：\" class=\"headerlink\" title=\"完整实例代码：\"></a>完整实例代码：</h2><pre class=\"line-numbers language-markup\" data-language=\"markup\"><code class=\"language-markup\">&lt;!doctype html&gt;\n&lt;html lang&#x3D;&quot;zh-CN&quot;&gt;\n&lt;head&gt;\n    &lt;meta charset&#x3D;&quot;UTF-8&quot;&gt;\n    &lt;meta name&#x3D;&quot;viewport&quot; content&#x3D;&quot;width&#x3D;device-width, user-scalable&#x3D;no, initial-scale&#x3D;1.0, maximum-scale&#x3D;1.0, minimum-scale&#x3D;1.0&quot;&gt;\n    &lt;meta http-equiv&#x3D;&quot;X-UA-Compatible&quot; content&#x3D;&quot;IE&#x3D;Edge&quot;&gt;\n    &lt;title&gt;3D地月环绕&lt;&#x2F;title&gt;\n    &lt;style type&#x3D;&quot;text&#x2F;css&quot;&gt;\n        *&#123;\n            margin: 0;\n            padding: 0;\n        &#125;\n        &#x2F;* 背景 *&#x2F;\n        canvas&#123;\n            background-image: url(resource&#x2F;Demo04&#x2F;imgs&#x2F;starts.jpg);\n            background-size: cover;\n        &#125;\n        .label&#123;\n            color: #FFF;\n            font-size: 16px;\n        &#125;\n    &lt;&#x2F;style&gt;\n    &lt;script type&#x3D;&quot;module&quot;&gt;\n        import *as THREE from &#39;&#x2F;libs&#x2F;build&#x2F;three.module.js&#39;;\n        import &#123; OrbitControls &#125; from &#39;&#x2F;libs&#x2F;jsm&#x2F;controls&#x2F;OrbitControls.js&#39;;\n        import &#123; CSS2DRenderer,CSS2DObject &#125; from &#39;&#x2F;libs&#x2F;jsm&#x2F;renderers&#x2F;CSS2DRenderer.js&#39;;\n\n        &#x2F;&#x2F; 声明全局变量\n        let camera,scene,renderer,labelRenderer;\n        let moon,earth;\n        let clock &#x3D; new THREE.Clock();\n        const textureLoader &#x3D; new THREE.TextureLoader();    &#x2F;&#x2F; 实例化纹理加载器\n\n        function init()&#123;\n            &#x2F;&#x2F; 地球月球半径大小\n            const EARTH_RADIUS &#x3D; 2.5;\n            const MOON_RADIUS &#x3D; 0.27;\n            &#x2F;&#x2F; 透视相机\n            camera &#x3D; new THREE.PerspectiveCamera(45,window.innerWidth&#x2F;window.innerHeight,0.1,200);\n            camera.position.set(10,5,20);\n            &#x2F;&#x2F; 实例化场景\n            scene &#x3D; new THREE.Scene();\n            &#x2F;&#x2F; 聚光灯\n            const dirLight &#x3D; new THREE.SpotLight(0xFFFFFF);\n            dirLight.position.set(0,0,10);\n            dirLight.intensity &#x3D; 2; &#x2F;&#x2F; 光源强度\n            dirLight.castShadow &#x3D; true; &#x2F;&#x2F; 光照阴影\n            scene.add(dirLight);\n            &#x2F;&#x2F; 添加环境光\n            const aLight &#x3D; new THREE.AmbientLight(0xFFFFFF);\n            aLight.intensity &#x3D; 0.3; &#x2F;&#x2F; 调整环境光亮度\n            scene.add(aLight);\n\n            &#x2F;&#x2F; 月球\n            const moonGeometry &#x3D; new THREE.SphereGeometry(MOON_RADIUS,16,16);\n            const moonMaterial &#x3D; new THREE.MeshPhongMaterial(&#123; map:textureLoader.load(&#39;resource&#x2F;Demo04&#x2F;textures&#x2F;planets&#x2F;moon_1024.jpg&#39;) &#125;); &#x2F;&#x2F; 可高光材质\n            moon &#x3D; new THREE.Mesh(moonGeometry,moonMaterial);\n            moon.receiveShadow &#x3D; true; &#x2F;&#x2F; 接收阴影\n            moon.castShadow &#x3D; true;\n            scene.add(moon);\n            &#x2F;&#x2F; 地球\n            const earthGeometry &#x3D; new THREE.SphereGeometry(EARTH_RADIUS,16,16);\n            const earthMaterial &#x3D; new THREE.MeshPhongMaterial(&#123;\n                shininess:5,    &#x2F;&#x2F; 调低镜面反射\n                map:textureLoader.load(&#39;resource&#x2F;Demo04&#x2F;textures&#x2F;planets&#x2F;earth_atmos_2048.jpg&#39;),\n                specularMap:textureLoader.load(&#39;resource&#x2F;Demo04&#x2F;textures&#x2F;planets&#x2F;earth_specular_2048.jpg&#39;),\n                normalMap:textureLoader.load(&#39;resource&#x2F;Demo04&#x2F;textures&#x2F;planets&#x2F;earth_normal_2048.jpg&#39;)\n            &#125;)\n            earth &#x3D; new THREE.Mesh(earthGeometry,earthMaterial);\n            earth.receiveShadow &#x3D; true; &#x2F;&#x2F; 接收阴影\n            earth.castShadow &#x3D; true;\n            scene.add(earth);\n\n            &#x2F;&#x2F; 地球标签\n            const earthDiv &#x3D; document.createElement(&#39;div&#39;);\n            earthDiv.className &#x3D; &#39;label&#39;;\n            earthDiv.textContent &#x3D; &#39;地球&#39;;\n            const eartchLabel &#x3D; new CSS2DObject(earthDiv);\n            eartchLabel.position.set(0,EARTH_RADIUS+0.5,0);\n            earth.add(eartchLabel);\n            &#x2F;&#x2F; 月球标签\n            const MoonDiv &#x3D; document.createElement(&#39;div&#39;);\n            MoonDiv.className &#x3D; &#39;label&#39;;\n            MoonDiv.textContent &#x3D; &#39;月球&#39;;\n            const MoonLabel &#x3D; new CSS2DObject(MoonDiv);\n            MoonLabel.position.set(0,MOON_RADIUS+0.5,0);\n            moon.add(MoonLabel);\n\n            &#x2F;&#x2F; 渲染器\n            renderer &#x3D; new THREE.WebGLRenderer(&#123;\n                alpha:true  &#x2F;&#x2F; 透明度\n            &#125;);\n            renderer.setPixelRatio(window.devicePixelRatio);   &#x2F;&#x2F; 像素比\n            renderer.setSize(window.innerWidth,window.innerHeight);\n            renderer.shadowMap.enabled &#x3D; true;   &#x2F;&#x2F; 渲染阴影\n            document.body.appendChild(renderer.domElement); &#x2F;&#x2F; 渲染到页面\n\n            &#x2F;&#x2F; 标签渲染器\n            labelRenderer &#x3D; new CSS2DRenderer();\n            labelRenderer.setSize(window.innerWidth,window.innerHeight);\n            labelRenderer.domElement.style.position &#x3D; &#39;absolute&#39;;\n            labelRenderer.domElement.style.top &#x3D; &#39;0px&#39;;\n            document.body.appendChild(labelRenderer.domElement);\n\n            &#x2F;&#x2F; 绑定三维场景控制器\n            const controls &#x3D; new OrbitControls(camera,labelRenderer.domElement);\n            controls.addEventListener(&#39;change&#39;,()&#x3D;&gt;&#123;\n                renderer.render(scene,camera);\n                labelRenderer.render(scene,camera);\n            &#125;)\n        &#125;\n        var oldTime &#x3D; 0;\n        &#x2F;&#x2F; 渲染动画函数\n        function animate()&#123;\n            const elapsed &#x3D; clock.getElapsedTime(); &#x2F;&#x2F; 获取时间\n            moon.position.set(Math.sin(elapsed)*5,0,Math.cos(elapsed)*5);    &#x2F;&#x2F; (时间*半径)\n            &#x2F;&#x2F; 地球自转\n            let axis &#x3D; new THREE.Vector3(0,1,0); &#x2F;&#x2F; 环绕 Y 轴\n            earth.rotateOnAxis(axis,(elapsed - oldTime) * Math.PI &#x2F; 10);  &#x2F;&#x2F; 1s 转一下\n            renderer.render(scene,camera);\n            labelRenderer.render(scene,camera);\n            oldTime &#x3D; elapsed;\n            requestAnimationFrame(animate);\n        &#125;\n\n        init()\n        animate()\n\n        &#x2F;&#x2F; 自动调整摄像机\n        window.onreset &#x3D; function ()&#123;\n            camera.aspect &#x3D; window.innerWidth&#x2F;window.innerHeight;\n            camera.updateProjectionMatrix();\n            renderer.setSize(window.innerWidth,window.innerHeight);\n        &#125;\n    &lt;&#x2F;script&gt;\n&lt;&#x2F;head&gt;\n\n&lt;body&gt;\n\n&lt;&#x2F;body&gt;\n\n&lt;&#x2F;html&gt;</code></pre>","feature":true,"text":"Three.Js开发WebGL地月环绕 Three.Js GitHub地址：点击跳转 Three.Js API说明文档：点击跳转 或复制网页端Three.js源...","link":"","photos":[],"count_time":{"symbolsCount":"6.8k","symbolsTime":"6 mins."},"categories":[{"name":"程序","slug":"程序","count":29,"path":"api/categories/程序.json"}],"tags":[{"name":"教学文档","slug":"教学文档","count":33,"path":"api/tags/教学文档.json"},{"name":"博客网站","slug":"博客网站","count":6,"path":"api/tags/博客网站.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#Three-Js%E5%BC%80%E5%8F%91WebGL%E5%9C%B0%E6%9C%88%E7%8E%AF%E7%BB%95\"><span class=\"toc-text\">Three.Js开发WebGL地月环绕</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%AE%8C%E6%95%B4%E5%AE%9E%E4%BE%8B%E4%BB%A3%E7%A0%81%EF%BC%9A\"><span class=\"toc-text\">完整实例代码：</span></a></li></ol></li></ol>","author":{"name":"Arvin","slug":"blog-author","avatar":"/imgs/head.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{},"next_post":{"title":"Three.Js开发WebGL鼠标操作三维场景","uid":"78bba4eb245f0658532280227722a7b2","slug":"ThreeJsWebGL_2022_4.19.04","date":"2022-04-20T07:43:00.000Z","updated":"2023-11-26T10:38:32.669Z","comments":true,"path":"api/articles/ThreeJsWebGL_2022_4.19.04.json","keywords":null,"cover":"https://pic3.zhimg.com/v2-7af105b5915de8a7fdcf6332b681aba5_r.jpg","text":"Three.Js开发WebGL鼠标操作三维场景 Three.Js GitHub地址：点击跳转 Three.Js API说明文档：点击跳转 或复制网页端Three...","link":"","photos":[],"count_time":{"symbolsCount":"5.8k","symbolsTime":"5 mins."},"categories":[{"name":"程序","slug":"程序","count":29,"path":"api/categories/程序.json"}],"tags":[{"name":"教学文档","slug":"教学文档","count":33,"path":"api/tags/教学文档.json"},{"name":"博客网站","slug":"博客网站","count":6,"path":"api/tags/博客网站.json"}],"author":{"name":"Arvin","slug":"blog-author","avatar":"/imgs/head.jpg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}